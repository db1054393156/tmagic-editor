{"version":3,"file":"PageFragmentContainer-DqNqhd6F.js","sources":["../../../../../../packages/schema/dist/tmagic-schema.js","../../../../../../vue-components/page-fragment-container/src/PageFragmentContainer.vue"],"sourcesContent":["var a = /* @__PURE__ */ ((r) => (r.CONTAINER = \"container\", r.PAGE = \"page\", r.ROOT = \"app\", r.PAGE_FRAGMENT = \"page-fragment\", r))(a || {});\nconst C = \"displayConds\";\nvar E = /* @__PURE__ */ ((r) => (r.COMP = \"comp\", r.CODE = \"code\", r.DATA_SOURCE = \"data-source\", r))(E || {}), O = /* @__PURE__ */ ((r) => (r.CODE = \"code\", r))(O || {}), t = /* @__PURE__ */ ((r) => (r.CODE = \"code\", r.DATA_SOURCE_METHOD = \"data-source-method\", r))(t || {});\nexport {\n  E as ActionType,\n  t as HookCodeType,\n  O as HookType,\n  C as NODE_CONDS_KEY,\n  a as NodeType\n};\n","<template>\n  <div>\n    <magic-ui-container\n      :iterator-index=\"iteratorIndex\"\n      :iterator-container-id=\"iteratorContainerId\"\n      :config=\"containerConfig\"\n      :model=\"model\"\n    ></magic-ui-container>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, type PropType } from 'vue-demi';\n\nimport { type Id, type MComponent, type MNode, NodeType } from '@tmagic/schema';\nimport { useApp } from '@tmagic/vue-runtime-help';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MComponent>,\n      required: true,\n    },\n    iteratorIndex: Array as PropType<number[]>,\n    iteratorContainerId: Array as PropType<Id[]>,\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const { app } = useApp({\n      config: props.config,\n      methods: {},\n      iteratorContainerId: props.iteratorContainerId,\n      iteratorIndex: props.iteratorIndex,\n    });\n\n    const fragment = computed(() => app?.dsl?.items?.find((page) => page.id === props.config.pageFragmentId));\n\n    const containerConfig = computed(() => {\n      if (!fragment.value) return { items: [], id: '', type: NodeType.CONTAINER };\n\n      const { id, type, items, ...others } = fragment.value;\n      const itemsWithoutId = items.map((item: MNode) => {\n        const { id, ...otherConfig } = item;\n        return {\n          ...otherConfig,\n        };\n      });\n\n      if (app?.platform === 'editor') {\n        return {\n          ...others,\n          items: itemsWithoutId,\n        };\n      }\n\n      return {\n        ...others,\n        items,\n      };\n    });\n\n    return {\n      containerConfig,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.in-editor .magic-ui-page-fragment-container {\n  min-width: 100px;\n  min-height: 100px;\n}\n</style>\n"],"names":["a","r","_sfc_main","props","app","useApp","fragment","_b","_a","page","NodeType","id","type","items","others","itemsWithoutId","item","id2","otherConfig","iteratorIndex","_component_magic_ui_container","iteratorContainerId","containerConfig","_ctx"],"mappings":"+FAAA,IAAIA,GAAsBC,IAAOA,EAAE,UAAY,YAAaA,EAAE,KAAO,OAAQA,EAAE,KAAO,MAAOA,EAAE,cAAgB,gBAAiBA,IAAID,GAAK,EAAE,ECiB3I,MAAeE,EAAA,QAAgB,gBAAA,CAAA,MAAA,CACtB,OAAA,CACG,KAAA,OACA,SAAA,EACI,EACZ,cAAA,MACe,oBAAA,MACM,MAAA,CACd,KAAA,OACC,QAAA,KAAA,CAAA,EACW,CACnB,EACF,MAAAC,EAAA,CAGE,KAAA,CAAA,IAAAC,CAAA,EAAAC,EAAA,CAAuB,OAAAF,EAAA,OACP,QAAA,CAAA,EACJ,oBAAAA,EAAA,oBACiB,cAAAA,EAAA,aACN,CAAA,EAGvBG,EAAiB,QAAA,SAAA,IAAA,SAAA,OAAAC,GAAAC,EAAAJ,GAAA,YAAAA,EAAA,MAAA,YAAAI,EAAA,QAAA,YAAAD,EAAA,KAAAE,GAAAA,EAAA,KAAAN,EAAA,OAAA,gBAAA,EA0BjB,MAAA,CAAO,gBAxBiB,sBACtB,GAAA,CAAAG,EAAA,MAAA,MAAA,CAAA,MAAA,CAAA,EAAA,GAAA,GAAA,KAAAI,EAAA,SAAA,EAEA,KAAA,CAAA,GAAAC,EAAA,KAAAC,EAAA,MAAAC,EAAA,GAAAC,CAAA,EAAAR,EAAA,MACAS,EAAAF,EAAA,IAAAG,GAAA,CACE,KAAA,CAAA,GAAAC,EAAA,GAAAC,CAAA,EAAAF,EACA,MAAA,CAAO,GAAAE,CACF,CACL,CAAA,EAGF,OAAAd,GAAA,YAAAA,EAAA,YAAA,SACE,CAAO,GAAAU,EACF,MAAAC,CACI,EAIX,CAAO,GAAAD,EACF,MAAAD,CACH,CACF,CAAA,CAIA,CACF,CAEJ,CAAA,kCApEE,IAOM,iBAAA,oBAAA,EALD,OAAA,IAAA,YAAgBM,IAAa,mBAAA,MAAA,KAAA,CAAA,IAAA,YAAAC,EAAA,CACNC,iBAAAA,EAAAA,cACfC,wBAAAA,EAAAA,oBACI,OAAAC,EAAA"}