{"version":3,"file":"PageFragmentContainer-legacy-DOD1qYj-.js","sources":["../../../../../../packages/schema/dist/tmagic-schema.js","../../../../../../vue-components/page-fragment-container/src/PageFragmentContainer.vue"],"sourcesContent":["var a = /* @__PURE__ */ ((r) => (r.CONTAINER = \"container\", r.PAGE = \"page\", r.ROOT = \"app\", r.PAGE_FRAGMENT = \"page-fragment\", r))(a || {});\nconst C = \"displayConds\";\nvar E = /* @__PURE__ */ ((r) => (r.COMP = \"comp\", r.CODE = \"code\", r.DATA_SOURCE = \"data-source\", r))(E || {}), O = /* @__PURE__ */ ((r) => (r.CODE = \"code\", r))(O || {}), t = /* @__PURE__ */ ((r) => (r.CODE = \"code\", r.DATA_SOURCE_METHOD = \"data-source-method\", r))(t || {});\nexport {\n  E as ActionType,\n  t as HookCodeType,\n  O as HookType,\n  C as NODE_CONDS_KEY,\n  a as NodeType\n};\n","<template>\n  <div>\n    <magic-ui-container\n      :iterator-index=\"iteratorIndex\"\n      :iterator-container-id=\"iteratorContainerId\"\n      :config=\"containerConfig\"\n      :model=\"model\"\n    ></magic-ui-container>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, type PropType } from 'vue-demi';\n\nimport { type Id, type MComponent, type MNode, NodeType } from '@tmagic/schema';\nimport { useApp } from '@tmagic/vue-runtime-help';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MComponent>,\n      required: true,\n    },\n    iteratorIndex: Array as PropType<number[]>,\n    iteratorContainerId: Array as PropType<Id[]>,\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const { app } = useApp({\n      config: props.config,\n      methods: {},\n      iteratorContainerId: props.iteratorContainerId,\n      iteratorIndex: props.iteratorIndex,\n    });\n\n    const fragment = computed(() => app?.dsl?.items?.find((page) => page.id === props.config.pageFragmentId));\n\n    const containerConfig = computed(() => {\n      if (!fragment.value) return { items: [], id: '', type: NodeType.CONTAINER };\n\n      const { id, type, items, ...others } = fragment.value;\n      const itemsWithoutId = items.map((item: MNode) => {\n        const { id, ...otherConfig } = item;\n        return {\n          ...otherConfig,\n        };\n      });\n\n      if (app?.platform === 'editor') {\n        return {\n          ...others,\n          items: itemsWithoutId,\n        };\n      }\n\n      return {\n        ...others,\n        items,\n      };\n    });\n\n    return {\n      containerConfig,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.in-editor .magic-ui-page-fragment-container {\n  min-width: 100px;\n  min-height: 100px;\n}\n</style>\n"],"names":["a","r","CONTAINER","PAGE","ROOT","PAGE_FRAGMENT","_sfc_main","VueDemi","defineComponent","props","config","type","Object","required","iteratorIndex","Array","iteratorContainerId","model","default","setup","app","useApp","methods","fragment","computed","dsl","items","find","page","id","pageFragmentId","containerConfig","value","NodeType","others","itemsWithoutId","map","item","id2","otherConfig","platform","Vue","resolveComponent","openBlock","createElementBlock","createVNode","_component_magic_ui_container","_ctx"],"mappings":"mXAAA,IAAIA,EAAoB,CAAEC,IAAOA,EAAEC,UAAY,YAAaD,EAAEE,KAAO,OAAQF,EAAEG,KAAO,MAAOH,EAAEI,cAAgB,gBAAiBJ,GAAxG,CAA4GD,GAAK,ICiB1H,MAAAM,EAAAC,QAAgBC,gBAAA,CAAAC,MAAA,CACtBC,OAAA,CACGC,KAAAC,OACAC,UAAA,GAERC,cAAAC,MACeC,oBAAAD,MACME,MAAA,CACdN,KAAAC,OACCM,QAAAA,KAAA,CAAA,KAGVC,KAAAA,CAAAV,GAGE,MAAAW,IAAAA,GAAAC,EAAA,CAAuBX,OAAAD,EAAAC,OACPY,QAAA,CAAA,EACJN,oBAAAP,EAAAO,oBACiBF,cAAAL,EAAAK,gBAI7BS,EAAiBhB,QAAAiB,UAAA,IAAAJ,GAAAK,KAAAC,OAAAC,MAAAC,GAAAA,EAAAC,KAAApB,EAAAC,OAAAoB,mBA0BjB,MAAA,CAAOC,gBAxBiBxB,uBACtB,IAAAgB,EAAAS,MAAA,MAAA,CAAAN,MAAA,GAAAG,GAAA,GAAAlB,KAAAsB,EAAA/B,WAEA,MAAA2B,GAAAA,EAAAlB,KAAAA,EAAAe,MAAAA,KAAAQ,GAAAX,EAAAS,MACAG,EAAAT,EAAAU,KAAAC,IACE,MAAAR,GAAAS,KAAAC,GAAAF,EACA,MAAA,IAAOE,EACF,IAIP,MAAA,WAAAnB,GAAAoB,SACE,IAAON,EACFR,MAAAS,GAKP,IAAOD,EACFR,QACH,IAMJ,6DAlEFe,IAOMC,iBAAA,sBALD,OAAAD,IAAAE,YAAgB7B,IAAa8B,mBAAA,MAAA,KAAA,CAAAH,IAAAI,YAAAC,EAAA,CACN9B,iBAAAA,EAAAA,cACfe,wBAAAA,EAAAA,oBACIrB,OAAAqC,EAAAhB"}